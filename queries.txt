CREATE TABLE iterations (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    start REAL NOT NULL
);

CREATE TABLE folders (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    parent INTEGER NOT NULL,
    name TEXT NOT NULL
);

CREATE TABLE paths (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    folder INTEGER,
    path TEXT NOT NULL
);

CREATE TABLE versions (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    path INTEGER NOT NULL,
    inode INTEGER NULL,
    previous_version INTEGER NULL,
    created REAL NOT NULL,
    deleted REAL NULL,
    created_i INTEGER NOT NULL,
    deleted_i INTEGER NULL
);

CREATE TABLE repository (
    id INTEGER PRIMARY KEY NOT NULL,
    hash TEXT NOT NULL
);

CREATE UNIQUE INDEX idx_iterations_id ON iterations (id);

CREATE UNIQUE INDEX idx_folders_id ON folders (id);
CREATE INDEX idx_folders_parent ON folders (parent);

CREATE UNIQUE INDEX idx_paths_id ON paths (id);
CREATE INDEX idx_paths_folder ON paths (folder);
CREATE INDEX idx_paths_path ON paths (path);

CREATE UNIQUE INDEX idx_versions_id ON versions (id);
CREATE INDEX idx_versions_path ON versions (path);
CREATE INDEX idx_versions_inode ON versions (inode);
CREATE INDEX idx_versions_previous ON versions (previous_version);

CREATE UNIQUE INDEX idx_repository_id ON repository (id);
CREATE UNIQUE INDEX idx_repository_hash ON repository (hash);


